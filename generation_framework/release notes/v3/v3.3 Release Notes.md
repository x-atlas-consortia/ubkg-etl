# Release Notes
## Unified Biological Knowledge Graph (UBKG)
### Generation Framework
### Version 3.3

# Bug Fixes

## GENCODE_VS
The GENCODE ETL encodes some information using a custom valueset, which is ingested into the 
UBKG prior to GENCODE with the SAB GENCODE_VS. 

The ingestion of GENCODE_VS was incorrectly formatting codes from the valueset as _GENCODE:VS code_  instead of _GENCODE_VS:code_.

## GENCODE
A typographical error in the source for the GENCODE_VS valueset resulted in invalid data related to chromosome 17. 
The source error was corrected.

## HPO
In the UMLS, codes from the Human Phenotype Ontology (HPO) are formatted as _HPO HP:code_, a divergence from the 
normal format of _SAB:CODE_. The UBKG generation framework had been converting the format of HPO codes from the 
UMLS as _HPO:CODE_; however, other SABs (e.g., MONDO, EFO) formatted HPO codes with HP as the SAB.

The generation framework now formats HPO codes with HP as the SAB.

## RefSeq

The RefSeq ETL script extracts descriptions of genes from the NCBI Gene database via the EUtils API.
The total number of Gene entries is over 194K, and the NCBI EUtilities API tends to fail with 500 errors 
if the script requests all of them at once. 

The ETL now "chunks" through the full set of RefSeq entries. The script works with subsets--e.g., from the 1st to the 50,000th, 
50,001st to the 100,0000th, etc. The INI file for the script includes a configurable chunk size.

## UNIPROTKB

The generation framework now correctly generates synonyms for proteins, including for 
proteins with names that include parenthesis.

The UniProtKB REST API returns protein name information for proteins with a string in which parentheses are used 
both in the names and as delimiters. For example, one name for the protein with UniProtKB ID Q7L0Y3 is
_mRNA methyladenosine-N(1)-methyltransferase_.

Because the UniProtKB ETL treated parentheses as delimiters, it incorrectly created synonyms for the case in which 
a name includes a parenthetical terms---e.g., the "(1)" in 
_mRNA methyladenosine-N(1)-methyltransferase_ would result in synonyms 
- mRNA methyladenosine-N
- 1
- -methyltransferase

This has been corrected so nested parenthesis are ignored as delimiters. 

# Revisions
### Format of relationship labels
Some relationships in the UBKG had names with characters that violated [neo4j naming rules](https://neo4j.com/docs/cypher-manual/current/syntax/naming/). 

The naming rules specify that relationship names:
1. Contain only alphanumeric characters or the underscore.
2. Start with a alphabetic character.

Although a relationship can include special characters or start with a number, Cypher queries that refer 
to the relationship must escape the relationship name with backticks. To avoid the need
for backticks, the generation framework reformats relationships in the UBKG as follows:

| Characters                        | Change                    | Example                      |
|-----------------------------------|---------------------------|------------------------------|
| hyphen                            | replaced with underscore  | **abc-def** to **abc_def**   |
| other non-alphanumeric characters | replaced with underscores | **abc (def)** to **abc_def** |
| leading numeric character         | preceded with 'REL_'      | **1abc** to **REL_1abc**     |

### Case of relationship labels
The generation framework casts relationship labels to lowercase.

# Source Updates
## UMLS
The UMLS base content for the UBKG has been updated to the UMLS 2023AB release.

## base context
Content from source ontologies and sources (e.g. UBERON, UniProtKB) was
refreshed for all sources between January 18-23, 2024.

## SAB changes
The following SABs are all part of the Data Distillery context.

| SAB   | former SAB | description                      |
|-------|------------|----------------------------------|
| HCOP  | HCOPHGNC   | human - mouse orthologs          |
| MPMGI | HCOPMP     | mouse genotype-phenotype mapping |
| KF    | KFPT       | Gabriella Miller Kids First      |

# Known content changes

| Context | SAB | Changes |
|---------|-----|---------|
|         |     |         |
|         |     |         |

## New SABs

| Context         | SAB     | Description                                  |
|-----------------|---------|----------------------------------------------|
| Data Distillery | STRING  | StringDB Protein-Protein Interaction Network |
| Data Distillery | WP      | WikiPathways: gene-gene interactions         |
| HubMAP/SenNet   | CEDAR   | CEDAR metadata templates                     |
| HubMAP/SenNet   | HMFIELD | HubMAP legacy metadata                       |
